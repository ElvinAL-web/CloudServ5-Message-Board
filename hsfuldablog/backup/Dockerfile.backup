# Use MongoDB official image
FROM mongo:latest

WORKDIR /usr/src/app

# Create backup directory
WORKDIR /backup

# Copy the backup script and make it executable
COPY backup.sh /usr/local/bin/
RUN chmod +x /usr/local/bin/backup.sh

# Set up cron job for backup every 15 minutes
RUN echo "*/15 * * * * /usr/local/bin/backup.sh >> /var/log/backup.log 2>&1" | crontab -

# Expose MongoDB port (optional, if needed)
EXPOSE 27017

# Start cron in foreground
CMD ["cron",Â "-f"]
